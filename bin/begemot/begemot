#!/usr/bin/env bash

#
# Примеси
#

begemot---() {
    "$BEGEMOT" "$@"
}

begemot-run() {
    arc st
    arc log -n 1
    begemot -- run "$@"
}

#
# Точка входа
#

begemot() {
    if declare -F begemot-$1 > /dev/null; then
        begemot-"$@"
        return
    fi

    begemot -- "$@"
}

export BEGEMOT=$ARCADIA_ROOT/alice/nlu/tools/begemot/begemot
[[ -f "$BEGEMOT" ]] || ya make -r "$(dirname "$BEGEMOT")"

begemot "$@"
